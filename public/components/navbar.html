<div class="navbar-content">
  <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
    <div class="container-fluid">
      <span class="navbar-brand">
        <img src="/static/assets/img/LACS.png" alt="LACS Logo" />
      </span>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="/static/index.html"><i
                class="bi bi-house-door"></i> <span data-i18n="navbar.home">Inicio</span></a></li>
          <li class="nav-item"><a class="nav-link" data-dropdown="services"><i class="bi bi-briefcase"></i> <span
                data-i18n="navbar.services" data-route="Servicios/">Servicios</span></a></li>
          <li class="nav-item"><a class="nav-link" data-dropdown="processes"><i class="bi bi-diagram-3"></i> <span
                data-i18n="navbar.processes" data-route="Procesos/">Procesos</span></a></li>
          <li class="nav-item"><a class="nav-link" data-dropdown="training"><i class="bi bi-mortarboard"></i>
              <span data-i18n="navbar.training" data-route="CentroFormacion/">Centro de formación</span></a>
          </li>
          <li class="nav-item"><a class="nav-link" href="/static/components/certificados.html"><i
                class="bi bi-award"></i>
              <span data-i18n="navbar.certificates" data-route="certificados.html">Certificados</span></a>
          </li>
          <li class="nav-item"><a class="nav-link" href="/static/components/contacto.html"><i
                class="bi bi-envelope"></i> <span data-i18n="navbar.contact"
                data-route="contacto.html">Contacto</span></a></li>
          <li id="dev-panel-link" class="nav-item" style="display:none;"><a class="nav-link btn btn-warning text-dark"
              href="/static/components/dev-panel.html"><i class="bi bi-tools"></i> <span>Panel Dev</span></a></li>
          <li class="nav-item navbar-actions">
            <button id="lang-switcher" class="btn-lang-switcher" type="button" aria-label="Cambiar idioma">
              <i class="bi bi-translate"></i> EN
            </button>
            <a class="btn btn-outline-light" href="/static/components/login.html"><i class="bi bi-person-circle"></i>
              <span data-i18n="navbar.login" data-route="login.html">Iniciar Sesión</span></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
<script>
  // Sincroniza el texto del botón de idioma con el idioma actual
  function updateLangBtn() {
    var btn = document.getElementById('lang-switcher');
    if (!btn || !window.i18next) return;
    var current = window.i18next.language || 'es';
    btn.innerHTML = '<i class="bi bi-translate"></i> ' + (current === 'en' ? 'ES' : 'EN');
  }
  function showDevPanelLinkIfDev() {
    var devLink = document.getElementById('dev-panel-link');
    try {
      var user = JSON.parse(localStorage.getItem('user'));
      console.log('[Navbar] Detected user:', user);
      if (user && user.role === 'dev') {
        devLink.style.display = '';
        console.log('[Navbar] Dev panel link shown.');
      } else {
        devLink.style.display = 'none';
        console.log('[Navbar] Dev panel link hidden.');
      }
    } catch (e) {
      devLink.style.display = 'none';
      console.log('[Navbar] Error parsing user from localStorage:', e);
    }
  }
  if (window.i18next) {
    window.i18next.on('languageChanged', updateLangBtn);
    document.addEventListener('DOMContentLoaded', function () {
      updateLangBtn();
      showDevPanelLinkIfDev();
    });
    setTimeout(function () {
      updateLangBtn();
      showDevPanelLinkIfDev();
    }, 100);
  }
</script>